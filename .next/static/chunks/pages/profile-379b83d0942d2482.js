(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[277],{9344:function(e,l,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile",function(){return t(5130)}])},1493:function(e,l,t){"use strict";t.d(l,{Kx:function(){return r},Sr:function(){return s},sp:function(){return n}});var a=t(5893);function r(e){let{...l}=e;return(0,a.jsx)("textarea",{...l,className:"w-full border rounded focus:outline-none focus:ring-1 ring-primary-500 focus:border-0 p-1 text-xs"})}function n(e){let{field:l,form:t,...r}=e;return(0,a.jsxs)("div",{className:"relative flex w-full border border-gray-300 rounded-md px-3 py-2 mt-3 shadow-sm focus-within:ring-1 focus-within:ring-primary-500 focus-within:border-primary-200",children:[(0,a.jsx)("label",{htmlFor:r.label,className:"absolute -top-2 left-6 -mt-px inline-block px-1 bg-white text-xs font-medium text-gray-900",children:r.label}),(0,a.jsx)("input",{...l,...r,className:"block w-full border-0 p-0 text-gray-900 placeholder-gray-500 focus:ring-0 focus:outline-none sm:text-sm"})]})}function s(e){let{field:l,form:t,...r}=e;return(0,a.jsxs)("div",{className:"relative flex w-full border border-gray-300 rounded-md px-3 py-2 mt-3 shadow-sm focus:outline-none focus-within:ring-1 focus-within:ring-primary-500 focus-within:border-primary-200",children:[(0,a.jsx)("label",{htmlFor:r.label,className:"absolute -top-2 left-6 -mt-px inline-block px-1 bg-white text-xs font-medium text-gray-900",children:r.label}),(0,a.jsx)("select",{...l,...r,className:"block w-full border-0 p-0 focus:outline-none text-gray-900 placeholder-gray-500 focus:ring-0 sm:text-sm"})]})}},5130:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return p}});var a=t(5893),r=t(1493),n=t(1017),s=t(1163),i=t(7294),o=t(9473),d=t(2883);let u=i.forwardRef(function({title:e,titleId:l,...t},a){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:a,"aria-labelledby":l},t),e?i.createElement("title",{id:l},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.774 48.774 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z"}),i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z"}))});var c=t(3144);function m(e){let{appendImage:l}=e,{user:t}=(0,o.v9)(e=>e.auth),r=(0,i.useRef)(null),n=()=>{r.current.click()},[s,d]=(0,i.useState)("");async function m(e){e.preventDefault();let l=r.current.files[0],t=new FormData;t.append("image",l)}return(0,a.jsx)("div",{children:(0,a.jsx)("form",{onSubmit:m,children:(0,a.jsx)("div",{className:"flex justify-center items-center",children:(0,a.jsxs)("div",{className:"relative w-24 h-24 m-2 ",children:[s?(0,a.jsx)("img",{className:"rounded-full border w-24 h-24 border-gray-100 shadow-sm overflow-hidden text-center",src:s,alt:"avatar"}):(0,a.jsx)("div",{className:"w-24 h-24 relative rounded-full border border-gray-100 shadow-sm overflow-hidden",children:(0,a.jsx)(c.Z,{src:null==t?void 0:t.avatar,alt:"",layout:"fill",objectFit:"cover"})}),(0,a.jsx)("input",{type:"file",className:"hidden",ref:r,onChange:function(e){let t=new FileReader;t.onload=function(e){d(e.target.result)},e.target.files[0]&&(t.readAsDataURL(e.target.files[0]),l(e.target.files[0]))},accept:"image/jpg, image/jpeg"}),!s&&(0,a.jsx)("div",{className:"absolute top-2 right-2 h-3 w-3 border border-white rounded-full bg-green-400 z-2"}),(0,a.jsx)("div",{className:"absolute bottom-2 right-0 border bg-gray-50 rounded-full z-2",children:(0,a.jsx)("div",{className:"flex justify-center items-center h-6 w-6",children:(0,a.jsx)("button",{type:"button",onClick:n,children:(0,a.jsx)(u,{className:"w-4 h-4 text-gray-400 hover:text-primary-400"})})})})]})})})})}var f=t(2920),x=t(4104);function p(){let e=(0,s.useRouter)(),l=(0,o.I0)(),{user:t,isSuccess:u,isError:c,message:p}=(0,o.v9)(e=>e.auth);(0,i.useEffect)(()=>{t||e.push("/login"),u&&f.Am.success(p),l((0,d.mc)())},[t,c,p,e,u,l]);let[h,g]=(0,i.useState)(null==t?void 0:t.full_name),[b,w]=(0,i.useState)(null==t?void 0:t.avatar),[v,j]=(0,i.useState)(null==t?void 0:t.email),[y,N]=(0,i.useState)(null==t?void 0:t.gender),[k,_]=(0,i.useState)(),[C,S]=(0,i.useState)(),[E,F]=(0,i.useState)(null==t?void 0:t._id),[M,P]=(0,i.useState)(null==t?void 0:t.contactNumber),A=e=>{w(e)},V=async()=>{let e=new FormData;b&&e.append("avatar",b),e.append("full_name",h),e.append("email",v),e.append("gender",y),e.append("contactNumber",M),e.append("id",E),l((0,d.ck)(e))},z=async()=>{await x.Z.post("/api/v1/user/changeUserPassword",{old_password:k,new_password:C,user_id:E}).then(e=>{f.Am.success(e.data.remarks),_(""),S("")}).catch(e=>f.Am.error(e.response.data.remarks))};return t?(0,a.jsx)("div",{className:"flex flex-col w-full items-center",children:(0,a.jsxs)("div",{className:"w-full max-w-2xl p-4 lg:p-8 bg-white rounded-lg shadow-lg",children:[(0,a.jsx)("div",{className:"tex-lg text-center font-semibold uppercase py-3",children:"My Profile"}),(0,a.jsx)("p",{className:"border-b w-full max-w-3xl mb-3"}),(0,a.jsx)(m,{appendImage:e=>A(e)}),(0,a.jsxs)("div",{className:"flex flex-col w-full max-w-2xl py-2",children:[(0,a.jsx)(r.sp,{label:"Full Name",defaultValue:h,onChange:e=>g(e.target.value)}),(0,a.jsx)(r.sp,{label:"Email ID",disabled:!0,defaultValue:v,onChange:e=>j(e.target.value)}),(0,a.jsx)(r.sp,{label:"Phone No",disabled:!0,defaultValue:M,onChange:e=>P(e.target.value)}),(0,a.jsxs)(r.Sr,{onChange:e=>N(e.target.value),children:[(0,a.jsx)("option",{value:"",selected:""==t.gender,children:"Select Gender"}),(0,a.jsx)("option",{value:"Male",selected:"Male"===t.gender,children:"Male"}),(0,a.jsx)("option",{value:"Female",selected:"Female"===t.gender,children:"Female"})]}),(0,a.jsx)("div",{className:"flex mt-6 justify-center",children:(0,a.jsx)(n.KH,{onClick:()=>V(),children:"Update Information"})})]}),(0,a.jsx)("div",{className:"tex-lg text-center font-semibold uppercase py-3",children:"Password"}),(0,a.jsx)("p",{className:"border-b w-full max-w-xl mb-3"}),(0,a.jsxs)("div",{className:"flex flex-col w-full max-w-2xl py-2",children:[(0,a.jsx)(r.sp,{value:k,onChange:e=>_(e.target.value)}),(0,a.jsx)(r.sp,{value:C,onChange:e=>S(e.target.value)})]}),(0,a.jsx)("div",{className:"flex mt-6 justify-center",children:(0,a.jsx)(n.KH,{disabled:!k||!C,onClick:()=>z(),children:"Update Password"})})]})}):null}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=9344)}),_N_E=e.O()}]);